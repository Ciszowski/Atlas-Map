{"ast":null,"code":"import _createClass from \"/home/karyl/Documents/Googlemap/googlemap/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/karyl/Documents/Googlemap/googlemap/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/karyl/Documents/Googlemap/googlemap/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/karyl/Documents/Googlemap/googlemap/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _classCallCheck from \"/home/karyl/Documents/Googlemap/googlemap/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nvar _jsxFileName = \"/home/karyl/Documents/Googlemap/googlemap/src/Mapcontainer.js\";\nimport React, { Component } from \"react\";\nimport { Map, InfoWindow, Polyline, Marker, GoogleApiWrapper } from 'google-maps-react';\nimport \"./App.css\";\nimport Geox from './Geox';\nimport MarkerConfig from \"./MarkerConfig\";\nimport Export from './Export';\nimport Import from './Import';\nimport Image1 from './image1.png';\nimport Image2 from './image2.png';\nexport var Markeur = function Markeur(nom, lat, lng) {\n  _classCallCheck(this, Markeur);\n\n  this.nom = nom;\n  this.lat = lat;\n  this.lng = lng;\n  this.titre = \"\";\n  this.texte = \"\";\n  this.img = \"\";\n  this.important = 0;\n};\nvar style = {\n  width: '75%',\n  height: '75%'\n};\nexport var MapContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MapContainer, _Component);\n\n  function MapContainer(_props) {\n    var _this;\n\n    _classCallCheck(this, MapContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MapContainer).call(this, _props));\n\n    _this.update = function () {\n      _this.setState({\n        nbmk: 10\n      });\n    };\n\n    _this.newDragend = function (markeur, p2, event) {\n      var newlat = event.latLng.lat();\n      var newlng = event.latLng.lng();\n      var id = markeur.id;\n      _this.geox.mk[id].lng = newlng;\n      _this.geox.mk[id].lat = newlat;\n\n      _this.setState({\n        nmbk: _this.geox.mk.length,\n        showingInfoWindow: false\n      });\n    };\n\n    _this.affichage = function (markeur, p2, event) {\n      _this.setState({\n        on: !_this.state.on\n      });\n    };\n\n    _this.ElementDiv = function (titre, text, img, number) {\n      if (_this.geox.mk.length > 0) {\n        _this.geox.mk[_this.state.selectedPlace.id].titre = titre;\n        _this.geox.mk[_this.state.selectedPlace.id].texte = text;\n        _this.geox.mk[_this.state.selectedPlace.id].important = 1;\n        _this.geox.mk[_this.state.selectedPlace.id].img = img;\n\n        _this.setState({\n          nmbk: _this.geox.mk.length\n        });\n      }\n    };\n\n    _this.onMarkerClick = function (props, marker, event) {\n      _this.setState({\n        selectedPlace: props,\n        activeMarker: marker,\n        Event: event\n      });\n      /** faire condition avec texte != \"\" et les autres !!!<< */\n\n\n      if (_this.geox.mk[props.id].important === 1 && _this.geox.mk[props.id].texte !== \"\") {\n        _this.setState({\n          showingInfoWindow: true\n        });\n      } else {\n        _this.setState({\n          showingInfoWindow: false\n        });\n      }\n    };\n\n    _this.FunctionTestAfficher = function () {\n      if (_this.geox.mk.length > 1) {\n        console.log(_this.geox.mk[0].lat);\n        return _this.geox.mk[1].lat;\n      }\n    };\n\n    _this.SupprimerMarkeurActuel = function () {\n      console.log(_this.geox.mk[_this.state.selectedPlace.id]);\n\n      _this.geox.mk.splice(_this.state.selectedPlace.id, 1);\n\n      _this.setState({\n        nbmk: _this.geox.mk.length,\n        showingInfoWindow: false,\n        selectedPlace: 0\n      });\n    };\n\n    _this.geox = new Geox();\n    _this.state = {\n      nbmk: 1,\n      isOpen: false,\n      Poly: true,\n      on: _props.on,\n      showingInfoWindow: false,\n      activeMarker: {},\n      selectedPlace: 0\n    };\n    _this.button = _this.state.on ? \"none\" : \"block\";\n    return _this;\n  }\n  /** Fonction serveur import - export **/\n\n\n  _createClass(MapContainer, [{\n    key: \"change\",\n    value: function change() {\n      this.setState({\n        Poly: !this.state.Poly\n      });\n    }\n    /** permet de supprimer un markeur depuis le bouton **/\n\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      this.geox.mk.pop();\n      this.setState({\n        nbmk: this.geox.mk.length\n      });\n      this.setState({\n        nbmk: this.geox.mk.length,\n        showingInfoWindow: false,\n        selectedPlace: 0\n      });\n    }\n    /** permet de supprimer tous les markeurs depuis le bouton **/\n\n  }, {\n    key: \"deleteAll\",\n    value: function deleteAll() {\n      this.geox.mk.splice(0, this.geox.mk.length);\n      this.setState({\n        nbmk: this.geox.mk.length,\n        showingInfoWindow: false,\n        selectedPlace: 0\n      });\n    }\n    /** permet d'ajouter un markeur sur la map en appuyant sur click gauche**/\n\n  }, {\n    key: \"handleMapClick\",\n    value: function handleMapClick(p1, p2, event) {\n      var lat = event.latLng.lat();\n      var lng = event.latLng.lng();\n      this.geox.mk.push(new Markeur(\"point \" + this.geox.mk.length, lat, lng));\n      this.setState({\n        nbmk: this.geox.mk.length\n      });\n      console.log(this.geox.mk);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var icon = Image2;\n      var rows = [];\n      var poli = [];\n      var info = \"\";\n\n      for (var i = 0; i < this.geox.mk.length; i++) {\n        if (this.geox.mk[i].important === 0) {\n          icon = Image2;\n        } else {\n          icon = Image1;\n        }\n\n        rows.push(React.createElement(Marker, {\n          id: i,\n          name: this.geox.mk[i].nom,\n          onClick: this.onMarkerClick,\n          draggable: true,\n          onDragend: this.newDragend,\n          position: {\n            lat: this.geox.mk[i].lat,\n            lng: this.geox.mk[i].lng\n          },\n          icon: icon,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }));\n        poli.push(rows[i].props.position);\n      }\n\n      if (this.geox.mk.length > 0 && this.state.selectedPlace !== 0) {\n        info = React.createElement(\"div\", {\n          className: \"MarkeurInfo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, this.geox.mk[this.state.selectedPlace.id].titre), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, this.geox.mk[this.state.selectedPlace.id].texte), React.createElement(\"img\", {\n          className: \"imgdiv\",\n          src: this.geox.mk[this.state.selectedPlace.id].img,\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }));\n      }\n\n      var polySelector = this.state.Poly ? poli : null;\n      return React.createElement(\"div\", {\n        className: \"MAPP\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(Map, {\n        style: style,\n        google: this.props.google,\n        zoom: 18,\n        initialCenter: {\n          lat: 43.599980,\n          lng: 1.443138\n        },\n        streetViewControl: false,\n        mapTypeControl: false,\n        onClick: this.handleMapClick.bind(this),\n        disableDoubleClickZoom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, rows, React.createElement(Polyline, {\n        path: polySelector,\n        strokeWeight: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }), React.createElement(InfoWindow, {\n        marker: this.state.activeMarker,\n        visible: this.state.showingInfoWindow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, info)), React.createElement(\"div\", {\n        className: \"sectiondroit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"ulmap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.deleteAll.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"Supprimer tous les markeurs\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.delete.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \"Supprimer dernier markeur\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.change.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"Tracer:\", this.state.Poly ? \" Désactiver\" : \" Activer\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(MarkerConfig, {\n        laat: this.state.selectedPlace.id,\n        delete: this.SupprimerMarkeurActuel,\n        add: this.ElementDiv,\n        Markeur: this.geox.mk[this.state.selectedPlace.id],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"sectionbas\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(Export, {\n        jsonSave: this.geox.mk,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }), React.createElement(Import, {\n        jsonLoad: this.geox.mk,\n        callback: this.update,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return MapContainer;\n}(Component);\nexport default GoogleApiWrapper({\n  apiKey: \"AIzaSyA3Gsj08QzmXalEyHuuHgnzNKk4dGS6i84\"\n})(MapContainer);","map":{"version":3,"sources":["/home/karyl/Documents/Googlemap/googlemap/src/Mapcontainer.js"],"names":["React","Component","Map","InfoWindow","Polyline","Marker","GoogleApiWrapper","Geox","MarkerConfig","Export","Import","Image1","Image2","Markeur","nom","lat","lng","titre","texte","img","important","style","width","height","MapContainer","props","update","setState","nbmk","newDragend","markeur","p2","event","newlat","latLng","newlng","id","geox","mk","nmbk","length","showingInfoWindow","affichage","on","state","ElementDiv","text","number","selectedPlace","onMarkerClick","marker","activeMarker","Event","FunctionTestAfficher","console","log","SupprimerMarkeurActuel","splice","isOpen","Poly","button","pop","p1","push","icon","rows","poli","info","i","position","polySelector","google","handleMapClick","bind","deleteAll","delete","change","apiKey"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {Map, InfoWindow, Polyline, Marker, GoogleApiWrapper} from 'google-maps-react';\nimport \"./App.css\";\nimport Geox from './Geox';\nimport MarkerConfig from \"./MarkerConfig\";\nimport Export from './Export';\nimport Import from './Import';\nimport Image1 from './image1.png';\nimport Image2 from './image2.png'\n\nexport class Markeur {\n\n    constructor(nom,lat,lng){\n\n        this.nom=nom;  \n        this.lat=lat;\n        this.lng=lng;\n        this.titre=\"\";\n        this.texte=\"\";\n        this.img=\"\";\n        this.important=0;\n    }\n}\n\n\nconst style = {\n    width: '75%',\n    height: '75%',\n};\n\n\nexport class MapContainer extends Component {\n    constructor(props) {\n        super(props);\n        this.geox = new Geox();\n\n        this.state = {\n            nbmk: 1,\n            isOpen: false,\n            Poly: true,\n            on: props.on,\n            showingInfoWindow: false,\n            activeMarker: {},\n            selectedPlace: 0,\n        };\n        this.button = this.state.on ? \"none\" : \"block\";\n\n\n    }\n\n\n/** Fonction serveur import - export **/\n\nupdate = () => {this.setState({nbmk:10})};\n\n/** Function qui permet de d'actualiser la polyline du markeur pour */\n    newDragend = (markeur,p2,event) =>{\n        var newlat = event.latLng.lat();\n        var newlng = event.latLng.lng();\n        var id= markeur.id;\n\n        this.geox.mk[id].lng=newlng;\n        this.geox.mk[id].lat=newlat;\n        this.setState({nmbk:this.geox.mk.length,showingInfoWindow:false});\n    };\n\n    affichage =(markeur,p2,event) => {\n    this.setState({on:!this.state.on})\n    };\n\n    ElementDiv = (titre,text,img,number) => {\n        if(this.geox.mk.length > 0){\n\n        this.geox.mk[this.state.selectedPlace.id].titre = titre;\n        this.geox.mk[this.state.selectedPlace.id].texte = text;\n\n        this.geox.mk[this.state.selectedPlace.id].important = 1;\n        this.geox.mk[this.state.selectedPlace.id].img = img\n        this.setState({nmbk:this.geox.mk.length});\n        }\n    }\n\n\n\n    change () {\n        this.setState({Poly:!this.state.Poly})\n    }\n\n    /** permet de supprimer un markeur depuis le bouton **/\n    delete () {\n        this.geox.mk.pop();\n        this.setState({nbmk:this.geox.mk.length})\n        this.setState({nbmk: this.geox.mk.length, showingInfoWindow: false,selectedPlace: 0})\n    }\n/** permet de supprimer tous les markeurs depuis le bouton **/\n    deleteAll () {\n\n        this.geox.mk.splice(0, this.geox.mk.length);\n        this.setState({nbmk: this.geox.mk.length, showingInfoWindow: false, selectedPlace: 0})\n    }\n\n/** permet d'ajouter un markeur sur la map en appuyant sur click gauche**/\n    handleMapClick(p1,p2,event) {\n        var lat = event.latLng.lat();\n        var lng = event.latLng.lng();\n        this.geox.mk.push(new Markeur(\"point \"+ this.geox.mk.length,lat,lng));\n        this.setState({nbmk:this.geox.mk.length});\n        console.log(this.geox.mk);\n    }\n    onMarkerClick = (props, marker, event) =>{\n        this.setState({\n            selectedPlace: props,\n            activeMarker: marker,\n            Event: event,\n            });\n            /** faire condition avec texte != \"\" et les autres !!!<< */\n        if((this.geox.mk[props.id].important === 1)&&(this.geox.mk[props.id].texte !== \"\")){\n            this.setState({showingInfoWindow:true})\n        } else {\n            this.setState({showingInfoWindow:false})\n        }\n               \n};\n    FunctionTestAfficher = () => {\n        if (this.geox.mk.length > 1){\n            console.log(this.geox.mk[0].lat);\n            return this.geox.mk[1].lat\n\n        }\n    };\n\n    SupprimerMarkeurActuel = () => {\n\n        console.log(this.geox.mk[this.state.selectedPlace.id]);\n        this.geox.mk.splice(this.state.selectedPlace.id,1);\n    \n        this.setState({nbmk: this.geox.mk.length, showingInfoWindow: false, selectedPlace: 0})\n\n    };\n\n\n\n    render() {\n\n        let icon=Image2\n        let rows = [];\n        let poli = [];\n        let info=\"\";\n\n        for (var i = 0; i< this.geox.mk.length;i++){\n            if (this.geox.mk[i].important === 0){\n                icon = Image2;\n            } else {\n                icon = Image1;\n            }\n            rows.push(\n                <Marker\n                id={i} name={this.geox.mk[i].nom}\n                onClick={this.onMarkerClick}\n                draggable={true} onDragend={this.newDragend}\n                position={{lat: this.geox.mk[i].lat,lng: this.geox.mk[i].lng}}\n                icon= {icon}\n                />);\n    \n\n\n            poli.push(rows[i].props.position)\n      }\n      if((this.geox.mk.length > 0)&&(this.state.selectedPlace !== 0)){\n          \n          info= <div className=\"MarkeurInfo\">\n          <h2>{this.geox.mk[this.state.selectedPlace.id].titre}</h2>\n          <p>{this.geox.mk[this.state.selectedPlace.id].texte}</p>\n          <img className=\"imgdiv\" src={this.geox.mk[this.state.selectedPlace.id].img} alt=\"\"/>\n      </div>\n      }\n       \n        const polySelector = this.state.Poly ? poli : null;\n\n\n\n\n        return (\n            <div className=\"MAPP\">\n                <Map\n                    style={style}\n                    google={this.props.google}\n                    zoom={18}\n                    initialCenter={{lat:43.599980, lng:1.443138}}\n                    streetViewControl={false}\n                    mapTypeControl={false}\n                    onClick={this.handleMapClick.bind(this)}\n\n                    disableDoubleClickZoom={true}\n                >\n                    {rows}\n                    <Polyline\n                    path={polySelector}\n                    strokeWeight={2}\n                    />\n\n                    <InfoWindow\n                        marker={this.state.activeMarker}\n                        visible={this.state.showingInfoWindow}\n                        >\n                        {info}\n                    </InfoWindow>\n\n                </Map>\n\n                <div className=\"sectiondroit\">\n                    <ul className=\"ulmap\">\n                        <li><button onClick={this.deleteAll.bind(this)}>Supprimer tous les markeurs</button></li>\n                        <br/>\n                        <li><button onClick={this.delete.bind(this)}>Supprimer dernier markeur</button></li>\n                        <br/>\n                        <li><button onClick={this.change.bind(this)}>Tracer:{this.state.Poly ? \" Désactiver\": \" Activer\"}</button></li>\n                    </ul>\n                    <div>\n                    <MarkerConfig\n                        laat={this.state.selectedPlace.id}\n                        delete={this.SupprimerMarkeurActuel}\n                        add={this.ElementDiv}\n                        Markeur={this.geox.mk[this.state.selectedPlace.id]}\n                    />\n                    </div>\n                </div>\n                <div className=\"sectionbas\">\n                    <Export jsonSave={this.geox.mk}/>\n                    <Import jsonLoad={this.geox.mk} callback={this.update}/>\n                </div>\n\n\n            </div>\n\n        );\n    }\n}\n\nexport default GoogleApiWrapper({\n    apiKey: \"AIzaSyA3Gsj08QzmXalEyHuuHgnzNKk4dGS6i84\"\n\n})(MapContainer)"]},"metadata":{},"sourceType":"module"}